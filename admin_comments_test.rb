#!/usr/bin/env ruby
# encoding: utf-8

# –¢–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –≤ –∞–¥–º–∏–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

puts "=== –¢–ï–°–¢ –ù–û–í–û–ì–û –§–£–ù–ö–¶–ò–û–ù–ê–õ–ê –ê–î–ú–ò–ù–ö–ò –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í ==="

def get_tab_description(filter)
  case filter
  when 'all'
    '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ + –Ω–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ)'
  when 'unpublished'
    '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (published = 0)'
  when 'new'
    '–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è'
  end
end

def simulate_comment_data(published_status)
  {
    id: rand(1000..9999),
    name: "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
    body: "–û—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤—ã–µ —Ü–≤–µ—Ç—ã! –†–µ–∫–æ–º–µ–Ω–¥—É—é!",
    rating: 5,
    published: published_status,
    order_eight_digit_id: rand(10000000..99999999),
    created_at: Time.now - rand(1..30) * 24 * 60 * 60
  }
end

def display_comment_in_admin_table(comment)
  is_published = comment[:published] == 1
  
  puts "–°—Ç—Ä–æ–∫–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ:"
  puts "  ID: #{comment[:id]} #{is_published ? '' : '(–∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç)'}"
  puts "  –ò–º—è: #{comment[:name]} #{is_published ? '' : '(–∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç)'}"
  puts "  –û—Ç–∑—ã–≤: #{comment[:body][0..30]}... #{is_published ? '' : '(–∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç)'}"
  puts "  –û—Ü–µ–Ω–∫–∞: #{comment[:rating]} #{is_published ? '' : '(–∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç)'}"
  puts "  –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: #{comment[:order_eight_digit_id]}"
  
  if is_published
    puts "  –°—Ç–∞—Ç—É—Å: [–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω] (–∑–µ–ª—ë–Ω—ã–π –ª–µ–π–±–ª)"
  else
    puts "  –°—Ç–∞—Ç—É—Å: [–ù–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω] (–∂—ë–ª—Ç—ã–π –ª–µ–π–±–ª)"
  end
  
  puts "  –§–æ–Ω —Å—Ç—Ä–æ–∫–∏: #{is_published ? '–æ–±—ã—á–Ω—ã–π' : '—Å–≤–µ—Ç–ª–æ-–∂—ë–ª—Ç—ã–π (#fffbea)'}"
  puts "---"
end

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
puts "1. –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:"
published_comment = simulate_comment_data(1)
display_comment_in_admin_table(published_comment)

puts "2. –ù–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:"
unpublished_comment = simulate_comment_data(0)
display_comment_in_admin_table(unpublished_comment)

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
puts "=== –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –í–ö–õ–ê–î–û–ö ==="
puts

tabs = [
  { name: '–í—Å–µ', url: '/admin/comments', icon: 'list', filter: 'all' },
  { name: '–ù–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ', url: '/admin/comments/unpublished', icon: 'exclamation-sign', filter: 'unpublished' },
  { name: '–ù–æ–≤—ã–π', url: '/admin/comments/new', icon: 'plus', filter: 'new' }
]

tabs.each_with_index do |tab, index|
  active_marker = case tab[:filter]
  when 'all'
    '(ACTIVE)' # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–∫—Ç–∏–≤–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–í—Å–µ"
  when 'unpublished'
    '(–Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞)'
  else
    ''
  end
  
  puts "#{index + 1}. [#{tab[:icon]}] #{tab[:name]} #{active_marker}"
  puts "   URL: #{tab[:url]}"
  puts "   –û–ø–∏—Å–∞–Ω–∏–µ: #{get_tab_description(tab[:filter])}"
  puts
end



# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
puts "=== –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –§–û–†–ú–´ –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø ==="
puts

forms_fields = [
  { name: 'title', status: 'removed', description: '–£–±—Ä–∞–Ω–æ –∏–∑ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è' },
  { name: 'name', status: 'existing', description: '–û—Å—Ç–∞–≤–ª–µ–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π' },
  { name: 'body', status: 'existing', description: '–û—Å—Ç–∞–≤–ª–µ–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π' },
  { name: 'rating', status: 'existing', description: '–û—Å—Ç–∞–≤–ª–µ–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π' },
  { name: 'date', status: 'existing', description: '–û—Å—Ç–∞–≤–ª–µ–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π' },
  { name: 'order_eight_digit_id', status: 'existing', description: '–û—Å—Ç–∞–≤–ª–µ–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π' },
  { name: 'published', status: 'new', description: '–ù–æ–≤–æ–µ –ø–æ–ª–µ: —á–µ–∫–±–æ–∫—Å –¥–ª—è –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∏—è' }
]

forms_fields.each do |field|
  status_marker = case field[:status]
  when 'new'
    '‚ú® –ù–û–í–û–ï'
  when 'removed'
    '‚ùå –£–ë–†–ê–ù–û'
  when 'existing'
    '‚úÖ –û–°–¢–ê–í–õ–ï–ù–û'
  end
  
  puts "#{status_marker} #{field[:name]}: #{field[:description]}"
end

puts "\n=== –ö–õ–Æ–ß–ï–í–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø ==="
puts

changes = [
  '‚ú® –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ "–ù–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ" –ø–µ—Ä–µ–¥ "–ù–æ–≤—ã–π"',
  '‚ùå –£–¥–∞–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ "title" –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –∞–¥–º–∏–Ω–∫–∏',
  '‚ú® –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ "–°—Ç–∞—Ç—É—Å" —Å –ª–µ–π–±–ª–∞–º–∏',
  'üé® –ù–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º',
  'üé® –ù–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–º–µ—é—Ç —Å–≤–µ—Ç–ª–æ-–∂—ë–ª—Ç—ã–π —Ñ–æ–Ω',
  '‚ú® –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ "published" –≤ —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è',
  'üîÑ –û–±–Ω–æ–≤–ª–µ–Ω allowed_params –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ published'
]

changes.each_with_index do |change, index|
  puts "#{index + 1}. #{change}"
end

puts "\n=== –†–ï–ó–£–õ–¨–¢–ê–¢ ==="
puts
puts "‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç:"
puts "   - –í–∏–¥–µ—Ç—å –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ '–í—Å–µ'"
puts "   - –ë—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –Ω–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ '–ù–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ'"
puts "   - –õ–µ–≥–∫–æ –æ—Ç–ª–∏—á–∞—Ç—å –Ω–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ (–∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç + –∂—ë–ª—Ç—ã–π —Ñ–æ–Ω)"
puts "   - –£–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å–æ–º –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–∑—ã–≤–∞"
puts "   - –ù–µ –≤–∏–¥–µ—Ç—å –ª–∏—à–Ω–µ–µ –ø–æ–ª–µ 'title' –≤ —Å–ø–∏—Å–∫–µ"

puts "\n–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ! üéÜ"
